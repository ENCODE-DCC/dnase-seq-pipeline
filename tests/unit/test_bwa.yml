- name: test_bwa_index
  tags:
    - unit
  command: >-
      tests/caper_run.sh \
      tests/unit/test_bwa_index.wdl \
      tests/unit/json/test_bwa_index.json 
  stdout:
    contains:
      - "bwa index dummy.txt"

- name: test_bwa_aln
  tags:
    - unit
  command: >-
      tests/caper_run.sh \
      tests/unit/test_bwa_aln.wdl \
      tests/unit/json/test_bwa_aln.json
  stdout:
    contains:
      - "bwa aln"
      - "-Y"
      - "-n 0.04"
      - "-l 32"
      - "-t 1"
      - "dummy.txt"
      - "> out.sai"

- name: test_bwa_aln_no_params
  tags:
    - unit
  command: >-
      tests/caper_run.sh \
      tests/unit/test_bwa_aln.wdl \
      tests/unit/json/test_bwa_aln_no_params.json
  stdout:
    contains:
      - "bwa aln"
      - "dummy.txt"
      - "> out.sai"
    must_not_contain:
      - "-Y"
      - "-n 0.04"
      - "-l 32"
      - "-t 1"

- name: test_bwa_aln_filter_casava_true
  tags:
    - unit
  command: >-
      tests/caper_run.sh \
      tests/unit/test_bwa_aln.wdl \
      tests/unit/json/test_bwa_aln_filter_casava_true.json
  stdout:
    contains:
      - "bwa aln"
      - "-Y"
      - "dummy.txt"
      - "> out.sai"
    must_not_contain:
      - "-n 0.04"
      - "-l 32"
      - "-t 1"


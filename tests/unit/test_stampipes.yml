- name: test_stampipes_filter_reads
  tags:
    - unit
  command: >-
      tests/caper_run.sh \
      tests/unit/wdl/test_stampipes_filter_reads.wdl \
      tests/unit/json/test_stampipes_filter_reads.json
  stdout:
    contains:
      - "python3"
      - "filter_reads.py"
      - "dummy.txt"
      - "flagged.bam"

- name: test_stampipes_bamcounts 
  tags:
    - unit
  command: >-
    tests/caper_run.sh \
    tests/unit/wdl/test_stampipes_bamcounts.wdl \
    tests/unit/json/test_stampipes_bamcounts.json
  stdout:
    contains:
      - "python3 $(which bamcounts.py)"
      - "dummy.txt"
      - "tagcounts.txt"

- name: test_stampipes_info
  tags:
    - unit
  command: >-
      tests/caper_run.sh \
      tests/unit/wdl/test_stampipes_info.wdl \
      tests/unit/json/test_stampipes_info.json
  stdout:
    contains:
      - "info.sh"
      - "dummy.txt"
      - "hotspot2"
      - "dummy.txt.hotspot2.info"

- name: test_samtools_faidx
  tags:
    - unit
  command: >-
    tests/caper_run.sh \
    tests/unit//wdl/test_samtools_faidx.wdl \
    tests/unit/json/test_samtools_faidx.json
  stdout:
    contains:
      - "samtools faidx dummy.txt"

- name: test_samtools_view
  tags:
    - unit
  command: >-
    tests/caper_run.sh \
    tests/unit/wdl/test_samtools_view.wdl \
    tests/unit/json/test_samtools_view.json
  stdout:
    contains:
      - "samtools view"
      - "-f 0x004"
      - "-F 1024"
      - "-h "
      - "-b "
      - "-1 "
      - "-@ 4"
      - "-t "
      - "dummy.txt"
      - "out"

- name: test_samtools_view_no_params
  tags:
    - unit
  command: >-
    tests/caper_run.sh \
    tests/unit/wdl/test_samtools_view.wdl \
    tests/unit/json/test_samtools_view_no_params.json
  stdout:
    contains:
      - "samtools view"
      - "dummy.txt"
      - "out.bam"
    must_not_contain:
      - "-f 0x004"
      - "-F 1024"
      - "-h "
      - "-b "
      - "-1 "
      - "-@ 4"
      - "-t "

- name: test_samtools_sort
  tags:
    - unit
  command: >-
    tests/caper_run.sh \
    tests/unit/wdl/test_samtools_sort.wdl \
    tests/unit/json/test_samtools_sort.json
  stdout:
    contains:
      - "samtools sort"
      - "-l 0"
      - "-@ 2"
      - "dummy.txt"
      - "sorted.bam"

- name: test_samtools_sort_no_params
  tags:
    - unit
  command: >-
    tests/caper_run.sh \
    tests/unit/wdl/test_samtools_sort.wdl \
    tests/unit/json/test_samtools_sort_no_params.json
  stdout:
    contains:
      - "samtools sort"
      - "dummy.txt"
      - "sorted.bam"
    must_not_contain:
      - "-l "
      - "-@ "
